!function(){const n=document.getElementById("the-list");let f,s,p,m,y,h,r,v,E,g,w;function L(){c(!0),s.appendChild(f)}async function o(){v.classList.add("is-active"),x();let e=semlaEdit.url+(p.id?p.id.substring(p.id.indexOf("-")+1):y.textContent.replaceAll(" ","+"));if(semlaEdit.wpMeta){if(!w){var t=[];for(const d of h.values())t.push(d.name);w="?_fields=meta."+t.join(",meta.")}e+=w}let n={};for(const u of h.values())n[u.name]=u.value.trim();semlaEdit.wpMeta&&(n={meta:n});try{var a,i=await fetch(e,{method:"PUT",headers:{"Content-Type":"application/json","X-WP-Nonce":semlaEdit.nonce},body:JSON.stringify(n)});if(!i.ok){let e;throw i.headers.get("Content-Type").startsWith("application/json")?(a=await i.json(),e=a.message,console.log("Fetch error",a)):e=await i.text(),new Error(`Response status code ${i.status}: `+e)}var s,r,o=i.headers.get("X-Wp-Nonce"),c=(o&&(semlaEdit.nonce=o),await i.json());for([s,r]of Object.entries(semlaEdit.wpMeta?c.meta:c))m.has(s)&&(m.get(s).textContent=r);p.style.opacity=0,L(),p.style.opacity=1,wp.a11y.speak("Changes saved.")}catch(e){var l="Error while saving the changes. "+e.message;E||(E=f.querySelector(".notice-error"),g=E.querySelector(".error")),E.classList.remove("hidden"),g.textContent=l,wp.a11y.speak(l),console.error(e)}finally{v.classList.remove("is-active")}}function c(e=!1){n.querySelectorAll("tr.hidden").forEach(e=>e.remove());var t=p.querySelector("button.editinline");t.setAttribute("aria-expanded","false"),p.hidden=!1,x(),e&&t.focus()}function x(){E&&E.classList.add("hidden")}n.addEventListener("click",function(e){e=e.target;if(e.classList.contains("editinline")){if(!f){function t(e){"Enter"===e.key&&(e.preventDefault(),o())}f=document.getElementById("inline-edit"),s=f.parentNode,f.querySelector(".save").addEventListener("click",o),f.querySelector(".cancel").addEventListener("click",L),f.addEventListener("keyup",function(e){"Escape"===e.key&&L()}),h=new Map,f.querySelectorAll("input, textarea").forEach(e=>{e.addEventListener("keydown",t),r=r||e,h.set(e.dataset.colname,e)}),y=f.querySelector(".inline-edit-title"),v=f.querySelector(".spinner")}f.parentNode!==s&&c(),f.remove(),p=e.closest("tr"),m=new Map;var n=p.cells;for(let e=0;e<n.length;e++){var a,i=n[e];i.classList.contains("column-primary")?y.textContent=i.innerText:(a=i.dataset.colname)&&h.has(a)&&((a=h.get(a)).value=i.innerText,m.set(a.name,i))}e.setAttribute("aria-expanded","true"),p.hidden=!0,p.insertAdjacentElement("afterend",f),p.insertAdjacentHTML("afterend",'<tr class="hidden"></tr>'),r.focus()}},!1)}();