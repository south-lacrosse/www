!function(){"use strict";let c,u,d,g,h,f,p=null,y,n=null,b=null,t=9,L=!0;const E={country:"gb"},a={UNKNOWN_ERROR:"The request could not be successfully processed, yet the exact reason for the failure is not known",OVER_QUERY_LIMIT:"The webpage has gone over the requests limit in too short a time",REQUEST_DENIED:"The webpage is not allowed to use the geocoder",INVALID_REQUEST:"This request was invalid",ZERO_RESULTS:"The address is unknown, please try another",ERROR:"There was a problem contacting the Google servers"};function w(){T(this.semlaClub)}function v(e,t){t===google.maps.GeocoderStatus.OK?M(e[0].geometry.location):alert(a[t])}function C(e){f.getZoom()<t?(f.setZoom(t),f.setCenter(e)):f.panTo(e)}function T(e){n=n||new google.maps.InfoWindow;let t='<h2 style="margin:0;border:0;font-size:1rem">'+e.name+"</h2>";L||(t+='<p style="margin:0;font-size:0.75rem">('+e.dist+" miles from search)</p>"),t+='<p style="margin:1em 0 0;font-size:1rem">'+e.html+' <a style="margin-left:2em" href="https://www.google.co.uk/maps/dir//'+e.latLng.toUrlValue()+"/@"+e.latLng.toUrlValue()+',16z">Directions</a></p>',n.setContent(t),n.open({anchor:e.marker,map:f})}function k(){n&&n.close()}function S(){var e=o(c),t=o(g)-e-c.offsetHeight,e=window.innerHeight-e-t-g.offsetHeight,e=Math.max(300,e),t=Math.round(e)+"px";c.style.height=t,u.style.height=t,f&&google.maps.event.trigger(f,"resize")}function o(e){let t=0;for(;e;)t+=e.offsetTop,e=e.offsetParent;return t}function M(t){C(t);var n=SemlaClubs.length,e=I(t.lat()),a=Math.sin(e),o=Math.cos(e);for(let e=n;e--;){var r=SemlaClubs[e],l=I(r.lat);r.dist=3959*Math.acos(a*Math.sin(l)+o*Math.cos(l)*Math.cos(I(t.lng()-r.lng)))}SemlaClubs.sort(R),L=!1,k();var s=d.getElementsByTagName("li");for(let e=n;e--;){var i=SemlaClubs[e],m=(i.order=e,i.dist=i.dist.toFixed(2),e+1+". "+i.name+" "+i.dist+" mi");i.marker.setLabel(""+(e+1)),i.marker.setTitle(m),s[e].textContent=m,s[e].setAttribute("title",m)}}function R(e,t){return e.dist-t.dist}function e(e,t){return e.name<t.name?-1:e.name>t.name?1:0}function N(){if(!L){SemlaClubs.sort(e),L=!0,k();var t=d.getElementsByTagName("li");for(let e=SemlaClubs.length;e--;){var n=SemlaClubs[e];n.order=e,n.marker.setLabel(""),n.marker.setTitle(n.name),t[e].textContent=n.name,t[e].setAttribute("title",n.name)}}}function I(e){return e*Math.PI/180}!async function(){var e=(await google.maps.importLibrary("maps"))["Map"],{ControlPosition:t,LatLng:n,LatLngBounds:a}=await google.maps.importLibrary("core"),o=(await google.maps.importLibrary("places"))["Autocomplete"],r=(c=document.getElementById("map"),u=document.getElementById("map-key"),d=document.getElementById("clubs-list"),g=document.getElementById("page-footer"),S(),window.addEventListener("resize",S,!1),SemlaClubs.length);y=new a;for(let e=r;e--;){var l=SemlaClubs[e];l.latLng=new n(l.lat,l.lng),y.extend(l.latLng)}(f=new e(c,{center:y.getCenter(),fullscreenControl:!0,scaleControl:!0,restriction:{latLngBounds:new a(new n(49,-6),new n(55.5,2.5)),strictBounds:!1}})).fitBounds(y);let s="";for(let e=0;e<r;e++){var i=SemlaClubs[e],m=new google.maps.Marker({map:f,title:i.name,optimized:!1,position:i.latLng,semlaClub:i});i.marker=m,i.order=e,m.addListener("click",w),s+='<li title="'+i.name+'">'+i.name+"</li>"}d.innerHTML=s,d.addEventListener("click",function(e){e=SemlaClubs[function(n){var a=n.parentNode.childNodes;let o=0;for(let e=0,t=a.length;e<t;e++){if(a[e]===n)return o;1===a[e].nodeType&&o++}return-1}(e.target)];C(e.latLng),T(e)},!1),document.getElementById("toggle-key").addEventListener("click",function(e){e.preventDefault(),-1<(p=p||document.getElementById("map-container")).className.indexOf("hide-key")?(p.className=p.className.replace(" hide-key",""),this.innerHTML="Hide Key"):(p.className+=" hide-key",this.innerHTML="Show Key"),google.maps.event.trigger(f,"resize")},!1),(e=document.createElement("div")).className="map-ctl",e.title="Centre all clubs on the map",e.innerHTML='<button type="button" class="map-ctl-text">Centre</button>',e.firstElementChild.addEventListener("click",function(){f.fitBounds(y),f.setCenter(y.getCenter())}),f.controls[t.LEFT_TOP].push(e),(a=document.createElement("div")).className="search-wrapper",a.innerHTML='<input class="search-box" type="text" placeholder="Search for clubs near..." size="30"><span class="search-reset" title="Reset search for nearest clubs">&times;</span>',new o(h=a.firstElementChild,{fields:["name","geometry.location"],componentRestrictions:E}).addListener("place_changed",function(){var e=this.getPlace();if(!e.geometry)return""===e.name.trim()?void N():void(b=b||new google.maps.Geocoder).geocode({address:e.name.trim(),componentRestrictions:E},v);M(e.geometry.location)}),a.lastElementChild.addEventListener("click",function(){h.value="",N()}),f.controls[t.TOP_RIGHT].push(a)}()}();