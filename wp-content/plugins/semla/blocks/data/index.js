(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var l in r)e.o(r,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:r[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,r=window.wp.apiFetch;var l=e.n(r);const a=window.wp.blockEditor,n=window.wp.blocks,o=window.wp.components,c=window.wp.primitives,s=(0,t.createElement)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(c.Path,{d:"M20.1 5.1L16.9 2 6.2 12.7l-1.3 4.4 4.5-1.3L20.1 5.1zM4 20.8h8v-1.5H4v1.5z"})),u=window.wp.serverSideRender;var i=e.n(u);(0,n.registerBlockType)("semla/data",{edit:function(e){let{attributes:r,setAttributes:n}=e;const[c,u]=(0,t.useState)(null);(0,t.useEffect)((()=>{l()({path:"/semla-admin/v1/leagues-cups"}).then((e=>{const r=[];for(let l=0,a=e.length;l<a;l++){const{id:a,type:n,name:o}=e[l];"league"===n?(r.push((0,t.createElement)("option",{key:`curr_tables,${a}`,value:`curr_tables,${a}`},o," League Tables")),r.push((0,t.createElement)("option",{key:`curr_grid,${a}`,value:`curr_grid,${a}`},o," Fixtures Grid"))):(r.push((0,t.createElement)("option",{key:`curr_flags,${a}`,value:`curr_flags,${a}`},o)),r.push((0,t.createElement)("option",{key:`curr_flags_rounds,${a}`,value:`curr_flags_rounds,${a}`},o," Table")))}u(r)})).catch((e=>console.log(e)))}),[]);const{src:p}=r,m=(0,a.useBlockProps)();if("none"===p)return(0,t.createElement)("div",m,(0,t.createElement)(o.Placeholder,{icon:(0,t.createElement)(o.Icon,{icon:"editor-table"}),label:"SEMLA Data",instructions:"Select the data source"},(0,t.createElement)("select",{className:"semla__select",onChange:e=>{n({src:e.target.value}),e.preventDefault()}},(0,t.createElement)("option",{value:"none"},"Select..."),(0,t.createElement)("option",{value:"clubs_list"},"Clubs List"),(0,t.createElement)("option",{value:"clubs_map"},"Clubs Map"),(0,t.createElement)("option",{value:"curr_fixtures"},"Fixtures"),c,(0,t.createElement)("option",{value:"curr_results"},"Recent Results/Upcoming Fixtures"))));const d="clubs_map"===p||"curr_fixtures"===p;return(0,t.createElement)("div",m,(0,t.createElement)(a.BlockControls,null,(0,t.createElement)(o.ToolbarGroup,null,(0,t.createElement)(o.ToolbarButton,{label:"Change data source",icon:s,onClick:()=>{n({src:"none"})}}))),d?(0,t.createElement)("p",{className:"semla__border semla__border_dashed"},"clubs_map"===p?"Clubs map ":"Fixtures"," will be inserted here - check the preview to see actual rendering."):(0,t.createElement)(o.Disabled,null,(0,t.createElement)(i(),{block:"semla/data",attributes:r})))}})})();