!function(){let n=document.getElementById("the-list"),f,r,p,m,y,h,s,v,E,g,w;function L(){l(!0),r.appendChild(f)}async function o(){v.classList.add("is-active"),x();let e=semlaEdit.url+(p.id?p.id.substring(p.id.indexOf("-")+1):y.textContent.replaceAll(" ","+"));if(semlaEdit.wpMeta){if(!w){var t,n=[];for(t of h.values())n.push(t.name);w="?_fields=meta."+n.join(",meta.")}e+=w}let a={};for(var i of h.values())a[i.name]=i.value.trim();semlaEdit.wpMeta&&(a={meta:a});try{var r,s=await fetch(e,{method:"PUT",headers:{"Content-Type":"application/json","X-WP-Nonce":semlaEdit.nonce},body:JSON.stringify(a)});if(!s.ok){let e;throw s.headers.get("Content-Type").startsWith("application/json")?(r=await s.json(),e=r.message,console.log("Fetch error",r)):e=await s.text(),new Error(`Response status code ${s.status}: `+e)}var o,l,c=s.headers.get("X-Wp-Nonce"),d=(c&&(semlaEdit.nonce=c),await s.json());for([o,l]of Object.entries(semlaEdit.wpMeta?d.meta:d))m.has(o)&&(m.get(o).textContent=l);p.style.opacity=0,L(),p.style.opacity=1,wp.a11y.speak("Changes saved.")}catch(e){var u="Error while saving the changes. "+e.message;E||(E=f.querySelector(".notice-error"),g=E.querySelector(".error")),E.classList.remove("hidden"),g.textContent=u,wp.a11y.speak(u),console.error(e)}finally{v.classList.remove("is-active")}}function l(e=!1){n.querySelectorAll("tr.hidden").forEach(e=>e.remove());var t=p.querySelector("button.editinline");t.setAttribute("aria-expanded","false"),p.hidden=!1,x(),e&&t.focus()}function x(){E&&E.classList.add("hidden")}n.addEventListener("click",function(e){e=e.target;if(e.classList.contains("editinline")){if(!f){function t(e){"Enter"===e.key&&(e.preventDefault(),o())}f=document.getElementById("inline-edit"),r=f.parentNode,f.querySelector(".save").addEventListener("click",o),f.querySelector(".cancel").addEventListener("click",L),f.addEventListener("keyup",function(e){"Escape"===e.key&&L()}),h=new Map,f.querySelectorAll("input, textarea").forEach(e=>{e.addEventListener("keydown",t),s=s||e,h.set(e.dataset.colname,e)}),y=f.querySelector(".inline-edit-title"),v=f.querySelector(".spinner")}f.parentNode!==r&&l(),f.remove(),p=e.closest("tr"),m=new Map;var n=p.cells;for(let e=0;e<n.length;e++){var a,i=n[e];i.classList.contains("column-primary")?y.textContent=i.innerText:(a=i.dataset.colname)&&h.has(a)&&((a=h.get(a)).value=i.innerText,m.set(a.name,i))}e.setAttribute("aria-expanded","true"),p.hidden=!0,p.insertAdjacentElement("afterend",f),p.insertAdjacentHTML("afterend",'<tr class="hidden"></tr>'),s.focus()}},!1)}();