(()=>{"use strict";var e={251:(e,t,l)=>{var r=l(196),a=Symbol.for("react.element"),n=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,l){var r,i={},s=null,m=null;for(r in void 0!==l&&(s=""+l),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(m=t.ref),t)n.call(t,r)&&!c.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:s,ref:m,props:i,_owner:o.current}}},893:(e,t,l)=>{e.exports=l(251)},196:e=>{e.exports=window.React}},t={};function l(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,l),n.exports}(()=>{var e=l(196);const t=window.wp.blockEditor,r=window.wp.blocks,a=window.wp.components,n=window.wp.element,o=window.wp.primitives;var c=l(893);const i=(0,c.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(o.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"})}),s=(0,c.jsx)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(o.Path,{d:"M4 7.2v1.5h16V7.2H4zm8 8.6h8v-1.5h-8v1.5zm-8-3.5l3 3-3 3 1 1 4-4-4-4-1 1z"})}),m=JSON.parse('{"u2":"semla/contact"}');function u(e){return(e=e.trim()).includes(" ")?e.replace(/  +/g," "):e.replace(/^\+44(\d{4})(\d{6})$/,"+44 $1 $2").replace(/^07(\d{3})(\d{6})$/,"07$1 $2")}const p={from:[{type:"raw",isMatch:e=>{var t,l;if("P"!==e.nodeName)return!1;const r=e.innerHTML.replaceAll("<br>"," ").replace(/<a[^>]*href="(mailto|tel)[^>]*>/g,"").replaceAll("</a>","");if(r.includes("<"))return!1;const a=r.split(":");if(2!==a.length)return!1;const n=a[1],o=null!==(t=n.match(/\b[A-Za-z0-9._%+-]+\@[A-Za-z0-9._%+-]+\.[A-Za-z]+\b/g)?.length)&&void 0!==t?t:0;if(o>1)return!1;const c=null!==(l=n.match(/\b\+?\d(?: ?\d){9,12}\b/g)?.length)&&void 0!==l?l:0;return c<2&&(o>0||c>0)},transform:e=>f(e.innerHTML)},{type:"block",isMultiBlock:!0,blocks:["core/paragraph"],transform:e=>e.map((({content:e})=>f(e)))},{type:"block",isMultiBlock:!0,blocks:["semla/attr-value"],transform:e=>e.map((({attr:e,value:t,sameLine:l})=>{const{text:a,email:n,tel:o}=b(t);return(0,r.createBlock)("semla/contact",{role:e,name:a,email:n,tel:o,sameLine:l})}))}],to:[{type:"block",isMultiBlock:!0,blocks:["core/paragraph"],transform:e=>e.map((e=>(0,r.createBlock)("core/paragraph",{content:`${e.role}: `+d(e)})))},{type:"block",isMultiBlock:!0,blocks:["semla/attr-value"],transform:e=>e.map((e=>(0,r.createBlock)("semla/attr-value",{attr:e.role,value:d(e),sameLine:e.sameLine})))}]};function b(e){let t="",l="",r=(e=e.replace(/<br[^>]*>/g," ").replace(/<(?!a |\/a>)[^>]*>/g,"").replaceAll("&nbsp;"," ")).match(/<a href="mailto:([^"]+)"/);return r?t=r[1].trim():(r=e.match(/\b[A-Za-z0-9._%+-]+\@[A-Za-z0-9._%+-]+\.[A-Za-z]+\b/),r&&(t=r[0],e=e.substring(0,r.index)+e.substring(r.index+r[0].length))),r=e.match(/<a href="tel:([^"]+)"/),r?l=u(r[1]):(r=e.match(/(?:^| )\+?\d(?: ?\d){9,12}\b/),r&&(l=u(r[0]),e=e.substring(0,r.index)+e.substring(r.index+r[0].length))),{text:e.replace(/<a[^>]*>[^>]*<\/a>/g,"").replace(/  +/g," ").trim(),email:t,tel:l}}function f(e){const{text:t,email:l,tel:a}=b(e);let n=null,o=null;const c=t.indexOf(":");return-1===c?n=t:(n=t.substring(0,c).trim(),o=t.substring(c+1).trim()),(0,r.createBlock)("semla/contact",{role:n,name:o,email:l,tel:a})}function d({name:e,email:t,tel:l}){let r=e?.trim()||"";return t&&(r&&(r+="<br>"),r+=`<a href="mailto:${t=t.trim()}">${t}</a>`),l&&(r&&(r+="<br>"),r+=`<a href="tel:${l.replaceAll(" ","")}">${l}</a>`),r}function h({attributes:t}){const{role:l,name:r,email:a,tel:n}=t,o={"pointer-events":"none"};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"avf-name"},l),(0,e.createElement)("div",{className:"avf-value"},r,a&&r&&(0,e.createElement)("br",null),a&&(0,e.createElement)("a",{style:o,href:`mailto:${a}`},a),n&&(r||a)&&(0,e.createElement)("br",null),n&&(0,e.createElement)("a",{style:o,href:`tel:${n.replaceAll(" ","")}`},n)))}function v({attributes:t,onChange:l}){const{role:r,name:n,email:o,tel:c}=t;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(a.TextControl,{label:"Role",value:r,onChange:e=>l({role:e})}),(0,e.createElement)(a.TextControl,{label:"Name",value:n,onChange:e=>l({name:e})}),(0,e.createElement)(a.TextControl,{label:"Email",type:"email",value:o,onChange:e=>l({email:e})}),(0,e.createElement)(a.TextControl,{label:"Telephone",type:"tel",value:c,onChange:e=>l({tel:e})}))}(0,r.registerBlockType)(m.u2,{edit:function({attributes:l,setAttributes:r,isSelected:o}){const{sameLine:c}=l,m=(0,t.useBlockProps)({className:c?"avf-same-line":""}),p=!l.role||!l.email&&!l.tel,[b,f]=(0,n.useState)(p);p&&!b&&f(!0);const[d,g]=(0,n.useState)({...l}),w=function(e){g({...d,...e});const t={};for(const l in e){const r=""+e[l];t[l]="tel"===l?u(r):"email"===l?r.replaceAll(" ",""):r.trim().replace(/  +/g," ")}r(t)};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t.BlockControls,null,(0,e.createElement)(a.ToolbarGroup,null,o&&!p&&(0,e.createElement)(a.ToolbarButton,{label:"Edit mode",icon:i,isActive:b,onClick:()=>f((e=>!e))}),(0,e.createElement)(a.ToolbarButton,{icon:s,label:"Put contact details on line below role",isActive:!c,onClick:()=>r({sameLine:!c})}))),o&&(0,e.createElement)(t.InspectorControls,null,(0,e.createElement)(a.PanelBody,{title:"Settings",initialOpen:!0},(0,e.createElement)(v,{attributes:d,onChange:w}))),(0,e.createElement)("div",{...m},p||b&&o?(0,e.createElement)(a.Placeholder,{icon:"admin-users",label:"Contact",isColumnLayout:!0},(0,e.createElement)(v,{attributes:d,onChange:w})):(0,e.createElement)(h,{attributes:l})))},transforms:p})})()})();