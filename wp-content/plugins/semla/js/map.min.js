(()=>{let h,p,f,E,b,y,w=null,C,v,L=null,d=!0,u=null,g=8,k={country:"gb"},n={UNKNOWN_ERROR:"The request could not be successfully processed, yet the exact reason is unknown",OVER_QUERY_LIMIT:"The webpage has gone over the requests limit in too short a time",REQUEST_DENIED:"The webpage is not allowed to use the geocoder",INVALID_REQUEST:"This request was invalid",ZERO_RESULTS:"The address is unknown, please try another",ERROR:"There was a problem contacting the Google servers"};function T(){M(this.semlaClub)}function S(e,t){t===google.maps.GeocoderStatus.OK?R(e[0]):alert(n[t])}function M(e){v.close();let t='<h2 style="margin:0;border:0;font-size:1rem">'+e.name+"</h2>";d||(t+='<p style="margin:0;font-size:0.75rem">('+e.dist+" miles from search)</p>"),t+='<p style="margin:1em 0 0;font-size:1rem">'+e.html+' <a style="margin-left:1.5em" href="https://www.google.co.uk/maps/dir//'+e.latLng.toUrlValue()+"/@"+e.latLng.toUrlValue()+',16z">Directions</a></p>',v.setContent(t),v.open({anchor:e.marker,map:y})}function I(){var e=a(h),t=a(E)-e-h.offsetHeight,e=window.innerHeight-e-t-E.offsetHeight,e=Math.max(300,e),t=Math.round(e)+"px";h.style.height=t,p.style.height=t,y&&google.maps.event.trigger(y,"resize")}function a(e){let t=0;for(;e;)t+=e.offsetTop,e=e.offsetParent;return t}function R(t){var n=t.geometry.location,e=(y.getZoom()>g?(y.setZoom(g),y.setCenter(n)):y.panTo(n),u||(e=new google.maps.marker.PinElement({background:"#5383EC",glyphColor:"#324F8E",borderColor:"#324F8E"}),(u=new google.maps.marker.AdvancedMarkerElement({map:y,content:e.element})).addListener("click",function(){v.setContent('<p style="margin:0;font-size:1rem;font-weight:400">Search near: '+this.title+"</p>"),v.open({anchor:this,map:y})})),u.position=n,u.title=t.formatted_address,u.map=y,B(n.lat())),a=Math.sin(e),o=Math.cos(e),t=SemlaClubs.length;for(let e=t;e--;){var l=SemlaClubs[e],r=B(l.lat),r=3959*Math.acos(a*Math.sin(r)+o*Math.cos(r)*Math.cos(B(n.lng()-l.lng)));l.dist=r.toFixed(2)}SemlaClubs.sort(N),d=!1,v.close();var s=f.getElementsByTagName("li");for(let e=t;e--;){var i=SemlaClubs[e],m=(i.order=e)+1+". "+i.name+" "+i.dist+" mi",c=new google.maps.marker.PinElement({glyph:""+(e+1)});i.marker.content=c.element,i.marker.title=m,s[e].textContent=m,s[e].setAttribute("title",m)}}function N(e,t){return e.dist-t.dist}function e(e,t){return e.name<t.name?-1:t.name<e.name?1:0}function x(){if(!d){v.close(),u.map=null,SemlaClubs.sort(e),d=!0;var t=f.getElementsByTagName("li");for(let e=SemlaClubs.length;e--;){var n=SemlaClubs[e];n.order=e,n.marker.content=null,n.marker.title=n.name,t[e].textContent=n.name,t[e].setAttribute("title",n.name)}}}function B(e){return e*Math.PI/180}(async()=>{var{Map:e,InfoWindow:t}=await google.maps.importLibrary("maps"),{ControlPosition:n,LatLng:a,LatLngBounds:o}=await google.maps.importLibrary("core"),l=(await google.maps.importLibrary("places")).Autocomplete,r=(await google.maps.importLibrary("marker")).AdvancedMarkerElement,s=(h=document.getElementById("map"),p=document.getElementById("map-key"),f=document.getElementById("clubs-list"),E=document.getElementById("page-footer"),I(),window.addEventListener("resize",I,!1),SemlaClubs.length);C=new o;for(let e=s;e--;){var i=SemlaClubs[e];i.latLng=new a(i.lat,i.lng),C.extend(i.latLng)}var m=C.getNorthEast(),c=C.getSouthWest(),o=new o(new a(c.lat()-6,c.lng()-6),new a(m.lat()+6,m.lng()+6));(y=new e(h,{center:C.getCenter(),fullscreenControl:!0,scaleControl:!0,mapId:window.location.host.startsWith("dev")?"DEMO_MAP_ID":"96908cc41d8bdc4f",restriction:{latLngBounds:o,strictBounds:!1}})).fitBounds(C),v=new t;let d="";for(let e=0;e<s;e++){var u=SemlaClubs[e],g=new r({map:y,title:u.name,position:u.latLng});u.marker=g,u.order=e,g.semlaClub=u,g.addListener("click",T),d+='<li title="'+u.name+'" data-index="'+e+'">'+u.name+"</li>"}f.innerHTML=d,f.addEventListener("click",function(e){var e=e.target.getAttribute("data-index");null!==e&&(e=SemlaClubs[e],y.getZoom()<9?(y.setZoom(9),y.setCenter(e.latLng)):y.panTo(e.latLng),M(e))},!1),document.getElementById("toggle-key").addEventListener("click",function(e){e.preventDefault(),-1<(w=w||document.getElementById("map-container")).className.indexOf("hide-key")?(w.className=w.className.replace(" hide-key",""),this.innerHTML="Hide Key"):(w.className+=" hide-key",this.innerHTML="Show Key"),google.maps.event.trigger(y,"resize")},!1),(c=document.createElement("div")).className="map-ctl",c.title="Centre all clubs on the map",c.innerHTML='<button type="button" class="map-ctl-text">Centre</button>',c.firstElementChild.addEventListener("click",function(){y.fitBounds(C),y.setCenter(C.getCenter())}),y.controls[n.LEFT_TOP].push(c),(m=document.createElement("div")).className="search-wrapper",m.innerHTML='<input id="search-box" type="text" placeholder="Search for clubs near..." size="30"><span class="search-reset" title="Reset search for nearest clubs">&times;</span>',new l(b=m.firstElementChild,{fields:["name","geometry.location","formatted_address"],componentRestrictions:k}).addListener("place_changed",function(){var e=this.getPlace();if(!e.geometry)return""===e.name.trim()?void x():void(L=L||new google.maps.Geocoder).geocode({address:e.name.trim(),componentRestrictions:k},S);R(e)}),m.lastElementChild.addEventListener("click",function(){b.value="",x()}),y.controls[n.TOP_RIGHT].push(m),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].forEach(e=>{document.addEventListener(e,function(){var e=document.querySelector(".pac-container");e&&(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.body).appendChild(e)})})})()})();